CDN其实是Content Delivery Network这三个词的缩写，也就是内容分发网络。

-------------------------------------------

CDN 拓扑图

Origin Server: 源站，也就是做 CDN 之前的客户真正的服务器;
User: 访问者，也就是要访问网站的网民;
Edge Server: CDN 的服务器，不单只“边缘服务器”
Last Mile: 最后一公里，也就是网民到他所访问到的 CDN 服务器之间的路径。

--------------------------------------------------------------------------

平时所使用的DNS服务器，一般称之为LDNS，在解析一个域名的时候，一般有两个情况，一种是域名在DNS上有记录，另一种情况是没有记录，两种情况的处理流程不一样。

-------------------------------------------------------------------------

当访问域名时，如LDNS上有缓存记录，会直接返回IP地址。如无缓存记录，将会向后面的服务器做请求，然后将所有数据交给客户。

------------------------------------------------------------------------

DNS调度

当用户使用DNS地址，所使用的DNS服务器去做递归的时会访问到某一个CDN厂商的GRB（全球的一个调度系统），调度服务器就会看到这个请求是来自某地的LDNS服务器，就会给它分配一个某地的服务器地址，来实现精准的区域性调度。

调度的准确性不保证

-------------------------------

HTTP的调度

http协议中有一个302跳转返回信令，客户访问server的时，虽说通过DNS方式无法拿到客户的真正IP地址，但是如果你访问的是http server，他一定能直接看到客户的真实IP，利用这种方法可以进行调度的纠偏，会告诉你，有一个location目标，这个location就是告诉你下一步将要怎么做，而具体调度是通过location来实现的。离你最近的CDN server。

调度的时间就已占用了很大的成分

----------------------------------------------------------

一般情况下都是通过DNS来进行第一次调度，然后用http来进行第二次纠偏

---------------------------------------------------------------

http DNS调度，它的原理是通过一个正常的http请求，发一个get的请求，然后再请求里面以参数的形式携带一个我要解析的域名，然后服务器那边去通过数据库查询，查询之后又通过http的正常响应，把这个你要请求的IP通过http协议给你，

在APP软件里面，有可能被运营商劫持等问题，为了避免这种劫持，

-------------------------------------------

Cache 系统—缓存系统

工作状态 命中（hit） 没有命中（miss）

---------------------------------------------

蛮力型攻击，量大的让你的带宽无法抗住最后导致拒绝服务

技巧性攻击，拖走你的数据库

-------------------------------------------------------

作为CDN来说，基本上我罗列了一下可能会用到的一些技术，大概10个。比如说就近分布、策略性的缓存、传输的优化、链路层的优化、包括内容的预取、合并回源。然后持久连接池、主动压缩，还有当你原始服务器挂了的话你怎么样能够保证让客户看到数据等很多的细节。

